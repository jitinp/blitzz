9999999999s:7469:"System.register("flagrow/image-upload/addImageUploadPane",["flarum/extend","flarum/components/AdminNav","flarum/components/AdminLinkButton","flagrow/image-upload/components/ImageUploadPage"],function(h,k){var b,d,e,f;h("default",function(){app.routes["image-upload"]={path:"/image-upload",component:f.component()};app.extensionSettings["flagrow-image-upload"]=function(){return m.route(app.route("image-upload"))};b(d.prototype,"items",function(a){a.add("image-upload",e.component({href:app.route("image-upload"),
icon:"picture-o",children:"Image Upload",description:app.translator.trans("flagrow-image-upload.admin.help_texts.description")}))})});return{setters:[function(a){b=a.extend},function(a){d=a["default"]},function(a){e=a["default"]},function(a){f=a["default"]}],execute:function(){}}});"use strict";
System.register("flagrow/image-upload/components/ImageUploadPage","flarum/Component flarum/components/Button flarum/utils/saveSettings flarum/components/Alert flarum/components/FieldSet flarum/components/Select flarum/components/Switch".split(" "),function(h,k){var b,d,e,f,a,l,n,p;return{setters:[function(a){b=a["default"]},function(a){d=a["default"]},function(a){e=a["default"]},function(a){f=a["default"]},function(b){a=b["default"]},function(a){l=a["default"]},function(a){n=a["default"]}],execute:function(){p=
function(b){function g(){babelHelpers.classCallCheck(this,g);return babelHelpers.possibleConstructorReturn(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}babelHelpers.inherits(g,b);babelHelpers.createClass(g,[{key:"init",value:function(){var a=this;this.loading=!1;this.fields="availableUploadMethods uploadMethod imgurClientId resizeMaxWidth resizeMaxHeight cdnUrl maxFileSize cloudinaryApiKey cloudinaryApiSecret cloudinaryCloudName".split(" ");this.checkboxes=["mustResize"];this.uploadMethodOptions=
{};this.values={};this.settingsPrefix="flagrow.image-upload";var b=app.data.settings;this.uploadMethodOptions=b[this.addPrefix("availableUploadMethods")];this.fields.forEach(function(c){return a.values[c]=m.prop(b[a.addPrefix(c)])});this.checkboxes.forEach(function(c){return a.values[c]=m.prop("1"===b[a.addPrefix(c)])})}},{key:"view",value:function(){return[m("div",{className:"ImageUploadPage"},[m("div",{className:"container"},[m("form",{onsubmit:this.onsubmit.bind(this)},[a.component({label:app.translator.trans("flagrow-image-upload.admin.labels.upload_method"),
children:[m("div",{className:"helpText"},app.translator.trans("flagrow-image-upload.admin.help_texts.upload_method")),l.component({options:this.uploadMethodOptions,onchange:this.values.uploadMethod,value:this.values.uploadMethod()||"local"})]}),m("div",{className:"ImageUploadPage-preferences"},[a.component({label:app.translator.trans("flagrow-image-upload.admin.labels.preferences.title"),children:[m("label",{},app.translator.trans("flagrow-image-upload.admin.labels.preferences.max_file_size")),m("input",
{className:"FormControl",value:this.values.maxFileSize()||2048,oninput:m.withAttr("value",this.values.maxFileSize)})]})]),m("div",{className:"ImageUploadPage-resize"},[a.component({label:app.translator.trans("flagrow-image-upload.admin.labels.resize.title"),children:[m("div",{className:"helpText"},app.translator.trans("flagrow-image-upload.admin.help_texts.resize")),n.component({state:this.values.mustResize()||!1,children:app.translator.trans("flagrow-image-upload.admin.labels.resize.toggle"),onchange:this.values.mustResize}),
m("label",{},app.translator.trans("flagrow-image-upload.admin.labels.resize.max_width")),m("input",{className:"FormControl",value:this.values.resizeMaxWidth()||100,oninput:m.withAttr("value",this.values.resizeMaxWidth),disabled:!this.values.mustResize()}),m("label",{},app.translator.trans("flagrow-image-upload.admin.labels.resize.max_height")),m("input",{className:"FormControl",value:this.values.resizeMaxHeight()||100,oninput:m.withAttr("value",this.values.resizeMaxHeight),disabled:!this.values.mustResize()})]})]),
m("div",{className:"ImageUploadPage-imgur",style:{display:"imgur"===this.values.uploadMethod()?"block":"none"}},[a.component({label:app.translator.trans("flagrow-image-upload.admin.labels.imgur.title"),children:[m("label",{},app.translator.trans("flagrow-image-upload.admin.labels.imgur.client_id")),m("input",{className:"FormControl",value:this.values.imgurClientId()||"",oninput:m.withAttr("value",this.values.imgurClientId)})]})]),m("div",{className:"ImageUploadPage-local",style:{display:"local"===
this.values.uploadMethod()?"block":"none"}},[a.component({label:app.translator.trans("flagrow-image-upload.admin.labels.local.title"),children:[m("label",{},app.translator.trans("flagrow-image-upload.admin.labels.local.cdn_url")),m("input",{className:"FormControl",value:this.values.cdnUrl()||"",oninput:m.withAttr("value",this.values.cdnUrl)})]})]),m("div",{className:"ImageUploadPage-cloudinary",style:{display:"cloudinary"===this.values.uploadMethod()?"block":"none"}},[a.component({label:app.translator.trans("flagrow-image-upload.admin.labels.cloudinary.title"),
children:[m("label",{},app.translator.trans("flagrow-image-upload.admin.labels.cloudinary.cloud_name")),m("input",{className:"FormControl",value:this.values.cloudinaryCloudName()||"",oninput:m.withAttr("value",this.values.cloudinaryCloudName)}),m("label",{},app.translator.trans("flagrow-image-upload.admin.labels.cloudinary.api_key")),m("input",{className:"FormControl",value:this.values.cloudinaryApiKey()||"",oninput:m.withAttr("value",this.values.cloudinaryApiKey)}),m("label",{},app.translator.trans("flagrow-image-upload.admin.labels.cloudinary.api_secret")),
m("input",{className:"FormControl",value:this.values.cloudinaryApiSecret()||"",oninput:m.withAttr("value",this.values.cloudinaryApiSecret)})]})]),d.component({type:"submit",className:"Button Button--primary",children:app.translator.trans("flagrow-image-upload.admin.buttons.save"),loading:this.loading,disabled:!this.changed()})])])])]}},{key:"changed",value:function(){var a=this,b=this.fields.some(function(b){return a.values[b]()!==app.data.settings[a.addPrefix(b)]}),c=this.checkboxes.some(function(b){return a.values[b]()!==
("1"==app.data.settings[a.addPrefix(b)])});return b||c}},{key:"onsubmit",value:function(a){var b=this;a.preventDefault();if(!this.loading){this.loading=!0;app.alerts.dismiss(this.successAlert);var c={};this.fields.forEach(function(a){return c[b.addPrefix(a)]=b.values[a]()});this.checkboxes.forEach(function(a){return c[b.addPrefix(a)]=b.values[a]()});e(c).then(function(){app.alerts.show(b.successAlert=new f({type:"success",children:app.translator.trans("core.admin.basics.saved_message")}))})["catch"](function(){}).then(function(){b.loading=
!1;m.redraw()})}}},{key:"addPrefix",value:function(a){return this.settingsPrefix+"."+a}}]);return g}(b);h("default",p)}}});"use strict";
System.register("flagrow/image-upload/main",["flarum/extend","flarum/app","flarum/utils/saveSettings","flarum/components/PermissionGrid","flagrow/image-upload/addImageUploadPane"],function(h,k){var b,d,e,f;return{setters:[function(a){b=a.extend},function(a){d=a["default"]},function(a){},function(a){e=a["default"]},function(a){f=a["default"]}],execute:function(){d.initializers.add("flagrow-image-upload",function(a){f();b(e.prototype,"startItems",function(b){b.add("uploadImages",{icon:"picture-o",label:a.translator.trans("flagrow-image-upload.admin.permissions.upload_images_label"),
permission:"flagrow.image.upload"})})})}}});";