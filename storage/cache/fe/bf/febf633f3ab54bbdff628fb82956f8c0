9999999999s:2549:"System.register("flagrow/image-upload/components/UploadButton",["flarum/Component","flarum/helpers/icon","flarum/components/LoadingIndicator"],function(f){var c,d,e,a;return{setters:[function(a){c=a["default"]},function(a){d=a["default"]},function(a){e=a["default"]}],execute:function(){a=function(a){function b(){babelHelpers.classCallCheck(this,b);babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).apply(this,arguments)}babelHelpers.inherits(b,a);babelHelpers.createClass(b,[{key:"init",
value:function(){this.textAreaObj=null;this.loading=!1}},{key:"view",value:function(){return m("div",{className:"Button hasIcon flagrow-image-upload-button Button--icon"},[this.loading?e.component({className:"Button-icon"}):d("picture-o",{className:"Button-icon"}),m("span",{className:"Button-label"},this.loading?app.translator.trans("flagrow-image-upload.forum.states.loading"):app.translator.trans("flagrow-image-upload.forum.buttons.attach")),m("form#flagrow-image-upload-form",[m("input",{type:"file",
accept:"image/*",name:"flagrow-image-upload-input",onchange:this.process.bind(this)})])])}},{key:"process",value:function(a){var b=new FormData;b.append("image",$(a.target)[0].files[0]);this.loading=!0;m.redraw();app.request({method:"POST",url:app.forum.attribute("apiUrl")+"/image/upload",serialize:function(a){return a},data:b}).then(this.success.bind(this),this.failure.bind(this))}},{key:"failure",value:function(a){}},{key:"success",value:function(a){var b=this;a=a.data.attributes.url;this.textAreaObj.insertAtCursor("\n![image "+
a+"]("+a+")\n");"undefined"!==typeof this.textAreaObj.props.preview&&this.textAreaObj.props.preview();setTimeout(function(){document.getElementById("flagrow-image-upload-form").reset();b.loading=!1},1E3)}}]);return b}(c);f("default",a)}}});
System.register("flagrow/image-upload/main",["flarum/extend","flarum/components/TextEditor","flagrow/image-upload/components/UploadButton"],function(f){var c,d,e;return{setters:[function(a){c=a.extend},function(a){d=a["default"]},function(a){e=a["default"]}],execute:function(){app.initializers.add("flagrow-image-upload",function(a){c(d.prototype,"controlItems",function(c){if(a.forum.attribute("canUploadImages")){var b=new e;b.textAreaObj=this;c.add("flagrow-image-upload",b,0);$(".Button-label",".item-flagrow-image-upload > div").hide();
$(".item-flagrow-image-upload > div").hover(function(){$(".Button-label",this).show();$(this).removeClass("Button--icon")},function(){$(".Button-label",this).hide();$(this).addClass("Button--icon")})}})})}}});";